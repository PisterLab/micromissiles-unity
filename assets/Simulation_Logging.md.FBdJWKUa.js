import{_ as s,c as i,o as a,aj as n,am as t,an as o,ao as l,ap as r}from"./chunks/framework.Cv6mcU5i.js";const y=JSON.parse('{"title":"Simulation Logging","description":"","frontmatter":{},"headers":[],"relativePath":"Simulation_Logging.md","filePath":"Simulation_Logging.md"}'),p={name:"Simulation_Logging.md"};function c(d,e,h,g,u,m){return a(),i("div",null,[...e[0]||(e[0]=[n('<h1 id="simulation-logging" tabindex="-1">Simulation Logging <a class="header-anchor" href="#simulation-logging" aria-label="Permalink to “Simulation Logging”">​</a></h1><p>This guide provides instructions on how to access and interpret the simulation logs. The <code>SimMonitor</code> class outputs a telemetry file and an event log, which can be visualized using the provided <code>visualize_log.py</code> script or replayed using the provided <code>replay_log.py</code> script. To aggregate logs from multiple runs kicked off using a run configuration, we have provided a <code>process_run.py</code> script.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to “Overview”">​</a></h2><p><img src="'+t+`" alt="Log visualizer"></p><p>Simulation logs capture detailed telemetry and event data from each simulation run. These logs are essential for debugging, performance analysis, and understanding the behavior of agents within the simulation. The <a href="https://github.com/PisterLab/micromissiles-unity/blob/master/Assets/Scripts/Monitors/SimMonitor.cs" target="_blank" rel="noreferrer"><code>SimMonitor</code> class</a> is responsible for:</p><ul><li>Collecting agent state data at some logging frequency.</li><li>Writing telemetry data to <code>sim_telemetry_*.bin</code> and converting the binary file to <code>sim_telemetry_*.csv</code>.</li><li>Recording significant events to <code>sim_events_*.csv</code>.</li><li>Organizing logs into timestamped directories for each simulation run.</li></ul><p>Logs are exported to the <code>Logs</code> directory in your operating system&#39;s <a href="https://docs.unity3d.com/ScriptReference/Application-persistentDataPath.html" target="_blank" rel="noreferrer">persistent data path</a>.</p><table tabindex="0"><thead><tr><th><strong>Operating System</strong></th><th><strong>Log directory</strong></th></tr></thead><tbody><tr><td>Windows</td><td><code>C:\\Users\\&lt;user&gt;\\AppData\\LocalLow\\BAMLAB\\micromissiles\\Logs</code></td></tr><tr><td>Mac</td><td><code>~/Library/Application Support/BAMLAB/micromissiles/Logs</code></td></tr><tr><td>Linux</td><td><code>~/.config/unity3d/BAMLAB/micromissiles/Logs</code></td></tr></tbody></table><h3 id="log-directory" tabindex="-1">Log Directory <a class="header-anchor" href="#log-directory" aria-label="Permalink to “Log Directory”">​</a></h3><p>Simulation logs are organized into timestamped directories within the <code>Logs</code> directory. Each simulation run generates a new subdirectory with the timestamp of the run, and each simulation configuration produces two CSV files:</p><ul><li><strong>Telemetry file (<code>sim_telemetry_*.csv</code>)</strong>: Contains detailed state information for each agent at each time step. The telemetry CSV file is converted from an accompanying <code>sim_telemetry_*.bin</code> binary file.</li><li><strong>Event log (<code>sim_events_*.csv</code>)</strong>: Records significant events such as hits, misses, agent creation, and termination.</li></ul><p>If the simulation run was executed interactively through the Unity Editor or through the command line without a run configuration provided, the logs will be stored in a directory called <code>run_&lt;timestamp&gt;</code>. Each engagement scenario will produce one telemetry file and one event log, so loading a new simulation configuration or restarting the simulation configuration generates additional CSV files.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Logs/</span></span>
<span class="line"><span>  ├── run_20251117_095849/</span></span>
<span class="line"><span>  │   ├── sim_telemetry_20251117_095849.bin</span></span>
<span class="line"><span>  │   ├── sim_telemetry_20251117_095849.csv</span></span>
<span class="line"><span>  │   ├── sim_events_20251117_095849.csv</span></span>
<span class="line"><span>  │   │</span></span>
<span class="line"><span>  │   │   # Corresponds to a different simulation configuration in the same simulation run.</span></span>
<span class="line"><span>  │   ├── sim_telemetry_20251117_095912.bin</span></span>
<span class="line"><span>  │   ├── sim_telemetry_20251117_095912.csv</span></span>
<span class="line"><span>  │   └── sim_events_20251117_095912.csv</span></span>
<span class="line"><span>  ├── run_20251117_105038/</span></span>
<span class="line"><span>  │   ├── sim_telemetry_20251117_105038.bin</span></span>
<span class="line"><span>  │   ├── sim_telemetry_20251117_105038.csv</span></span>
<span class="line"><span>  │   └── sim_events_20251117_105038.csv</span></span>
<span class="line"><span>  │</span></span>
<span class="line"><span>  └── ...</span></span></code></pre></div><p>If the simulation run was executed through the command line with a run configuration provided, the logs will be stored in a parent directory called <code>&lt;run_config_name&gt;_&lt;timestamp&gt;</code>. The logs of each simulation run are then stored in subdirectories within this parent directory, called <code>run_&lt;run_index&gt;_seed_&lt;seed&gt;</code>. Since a run configuration is provided, the simulation does not automatically restart on conclusion, so there are only two CSV files per subdirectory.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Logs/</span></span>
<span class="line"><span>  ├── batch_7_quadcopters_20251117_095849/</span></span>
<span class="line"><span>  │   ├── run_1_seed_200/</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_095849.bin</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_095849.csv</span></span>
<span class="line"><span>  │   │   └── sim_events_20251117_095849.csv</span></span>
<span class="line"><span>  │   ├── run_2_seed_201/</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_095902.bin</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_095902.csv</span></span>
<span class="line"><span>  │   │   └── sim_events_20251117_095902.csv</span></span>
<span class="line"><span>  │   └── ...</span></span>
<span class="line"><span>  │</span></span>
<span class="line"><span>  ├── batch_5_swarms_100_ucav_20251117_105038/</span></span>
<span class="line"><span>  │   ├── run_1_seed_100/</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_105038.bin</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_105038.csv</span></span>
<span class="line"><span>  │   │   └── sim_events_20251117_105038.csv</span></span>
<span class="line"><span>  │   ├── run_2_seed_101/</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_105228.bin</span></span>
<span class="line"><span>  │   │   ├── sim_telemetry_20251117_105228.csv</span></span>
<span class="line"><span>  │   │   └── sim_events_20251117_105228.csv</span></span>
<span class="line"><span>  │   └── ...</span></span>
<span class="line"><span>  │</span></span>
<span class="line"><span>  └── ...</span></span></code></pre></div><h2 id="telemetry-file" tabindex="-1">Telemetry File <a class="header-anchor" href="#telemetry-file" aria-label="Permalink to “Telemetry File”">​</a></h2><p>The telemetry file provides a snapshot of the simulation at each time step for every agent. Key columns include:</p><ul><li><strong><code>Time</code></strong>: Simulation time at the snapshot.</li><li><strong><code>AgentType</code></strong>: Type of the agent, e.g., <code>CarrierInterceptor</code>, <code>MissileInterceptor</code>, <code>FixedWingThreat</code>, or <code>RotaryWingThreat</code>.</li><li><strong><code>AgentID</code></strong>: Unique identifier for each agent, e.g., <code>Micromissile_Interceptor_6</code> or <code>Quadcopter_Threat_2</code>.</li><li><strong><code>PositionX</code></strong>, <strong><code>PositionY</code></strong>, <strong><code>PositionZ</code></strong>: Position of the agent.</li><li><strong><code>VelocityX</code></strong>, <strong><code>VelocityY</code></strong>, <strong><code>VelocityZ</code></strong>: Velocity of the agent.</li></ul><h2 id="event-log" tabindex="-1">Event Log <a class="header-anchor" href="#event-log" aria-label="Permalink to “Event Log”">​</a></h2><p>The event log records significant events within the simulation. Key columns include:</p><ul><li><strong><code>Time</code></strong>: Simulation time when the event occurred.</li><li><strong><code>Event</code></strong>: Type of event, e.g., <code>NEW_INTERCEPTOR</code>, <code>NEW_THREAT</code>, <code>INTERCEPTOR_HIT</code>, <code>INTERCEPTOR_MISS</code>, <code>THREAT_HIT</code>, or <code>THREAT_MISS</code>.</li><li><strong><code>AgentType</code></strong>: Type of the agent, e.g., <code>CarrierInterceptor</code>, <code>MissileInterceptor</code>, <code>FixedWingThreat</code>, or <code>RotaryWingThreat</code>.</li><li><strong><code>AgentID</code></strong>: Unique identifier for each agent, e.g., <code>Micromissile_Interceptor_6</code>.</li><li><strong><code>PositionX</code></strong>, <strong><code>PositionY</code></strong>, <strong><code>PositionZ</code></strong>: Position where the event occurred.</li></ul><h2 id="log-visualizer" tabindex="-1">Log Visualizer <a class="header-anchor" href="#log-visualizer" aria-label="Permalink to “Log Visualizer”">​</a></h2><p><code>visualize_log.py</code> is an example script provided to help visualize the agent trajectories and events in a 3D plot. It is included in the <code>Tools</code> directory of the release.</p><h3 id="requirements" tabindex="-1">Requirements <a class="header-anchor" href="#requirements" aria-label="Permalink to “Requirements”">​</a></h3><p>To run <code>visualize_log.py</code>, ensure that you have Python 3 installed on your system and that you have the following Python libraries:</p><ul><li><strong><code>absl-py</code></strong></li><li><strong><code>matplotlib</code></strong></li><li><strong><code>numpy</code></strong></li><li><strong><code>pandas</code></strong></li></ul><h3 id="visualizing-the-log" tabindex="-1">Visualizing the Log <a class="header-anchor" href="#visualizing-the-log" aria-label="Permalink to “Visualizing the Log”">​</a></h3><p>Run the script as follows:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Tools/visualize_log.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --telemetry_file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/sim_telemetry_file.csv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --event_log</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/sim_events_file.csv</span></span></code></pre></div><p>If either the telemetry file or the event log is not provided, the script will automatically locate the most recent <code>sim_telemetry_*.csv</code> and <code>sim_events_*.csv</code> files within the provided <code>--log_search_dir</code>. If <code>--log_search_dir</code> is not provided, it defaults to the persistent data path.</p><p>The script then outputs a summary of the events, including the total number of interceptor hits and misses.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Total number of events: 490.</span></span>
<span class="line"><span>Event counts:</span></span>
<span class="line"><span>  NEW_INTERCEPTOR: 170</span></span>
<span class="line"><span>  NEW_THREAT: 100</span></span>
<span class="line"><span>  THREAT_MISS: 100</span></span>
<span class="line"><span>  INTERCEPTOR_HIT: 100</span></span>
<span class="line"><span>  INTERCEPTOR_MISS: 20</span></span>
<span class="line"><span>Total duration of events: 45.72 seconds (from 0.00 to 45.72).</span></span>
<span class="line"><span>Number of interceptor hits recorded: 100.</span></span>
<span class="line"><span>  First hit at 15.77, last hit at 45.72.</span></span>
<span class="line"><span>Number of interceptor misses recorded: 20.</span></span>
<span class="line"><span>  First miss at 16.55, last miss at 45.59.</span></span></code></pre></div><p>Finally, the script plots the agent trajectories and marks events, such as interceptor hits and misses, in a 3D plot.</p><h2 id="telemetry-replay" tabindex="-1">Telemetry Replay <a class="header-anchor" href="#telemetry-replay" aria-label="Permalink to “Telemetry Replay”">​</a></h2><p><code>replay_log.py</code> is an example script provided to replay the telemetry file and interactively visualize all agent trajectories in a 3D web animation. It is included in the <code>Tools</code> directory of the release.</p><h3 id="requirements-1" tabindex="-1">Requirements <a class="header-anchor" href="#requirements-1" aria-label="Permalink to “Requirements”">​</a></h3><p>To run <code>replay_log.py</code>, ensure that you have Python 3 installed on your system and that you have the following Python libraries:</p><ul><li><strong><code>absl-py</code></strong></li><li><strong><code>pandas</code></strong></li></ul><h3 id="replaying-the-log" tabindex="-1">Replaying the Log <a class="header-anchor" href="#replaying-the-log" aria-label="Permalink to “Replaying the Log”">​</a></h3><p>Run the script as follows:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Tools/replay_log.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --telemetry_file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/sim_telemetry_file.csv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/animation.html</span></span></code></pre></div><p>If the telemetry file is not provided, the script will automatically locate the most recent <code>sim_telemetry_*.csv</code> file within the provided <code>--log_search_dir</code>. If <code>--log_search_dir</code> is not provided, it defaults to the persistent data path.</p><p>The script generates an HTML file containing an interactive 3D animation of the telemetry file and outputs it to the given output file path. The HTML file can be opened in any web browser to view the animation.</p><p><img src="`+o+`" alt="Telemetry animation"></p><h2 id="run-processor" tabindex="-1">Run Processor <a class="header-anchor" href="#run-processor" aria-label="Permalink to “Run Processor”">​</a></h2><p>If the simulation run was kicked off using a run configuration, you can use the provided <code>process_run.py</code> script to aggregate metrics across multiple simulation runs and analyze and visualize them. <code>process_run.py</code> is included in the <code>Tools</code> directory of the release.</p><h3 id="requirements-2" tabindex="-1">Requirements <a class="header-anchor" href="#requirements-2" aria-label="Permalink to “Requirements”">​</a></h3><p>To run <code>process_run.py</code>, ensure that you have Python 3 installed on your system and that you have the following Python libraries:</p><ul><li><strong><code>absl-py</code></strong></li><li><strong><code>matplotlib</code></strong></li><li><strong><code>numpy</code></strong></li><li><strong><code>pandas</code></strong></li></ul><h3 id="processing-a-run" tabindex="-1">Processing a Run <a class="header-anchor" href="#processing-a-run" aria-label="Permalink to “Processing a Run”">​</a></h3><p>Run the script as follows:</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">python3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Tools/process_run.py</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --run_log_dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path/to/run_log_directory_20251117_095849</span></span></code></pre></div><p>If <code>--run_log_dir</code> is not provided, the script will automatically locate the most recent subdirectory within the provided <code>--run_log_search_dir</code>. If <code>--run_log_search_dir</code> is not provided, it defaults to the persistent data path.</p><p>The script then aggregates the events for all telemetry files and event logs found within the log directory and its subdirectories.</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>Aggregating the stats for 50 runs found in the log directory.</span></span>
<span class="line"><span>  Number of missile interceptors: mean: 150.360000, std: 13.805448.</span></span>
<span class="line"><span>  Number of missile interceptor hits: mean: 99.840000, std: 0.611882.</span></span>
<span class="line"><span>  Number of missile interceptor misses: mean: 36.360000, std: 14.784803.</span></span>
<span class="line"><span>  Missile interceptor hit rate: mean: 0.741564, std: 0.077913.</span></span>
<span class="line"><span>  Missile interceptor efficiency: mean: 0.669430, std: 0.059498.</span></span>
<span class="line"><span>  Minimum intercept distance: mean: 6154.423782, std: 1283.849098.</span></span></code></pre></div><p>Each statistic is implemented as a <code>Metric</code>, which is evaluated on each simulation run.</p><ul><li>A <code>ScalarMetric</code> is a single numerical output from a single simulation run, such as the number of interceptors, the number of hits and misses, and the minimum intercept distance.</li><li>A <code>MultiMetric</code> outputs a list of an arbitrary type from a single simulation run, such as all intercept positions. These metrics are then aggregated and analyzed for all simulation runs.</li></ul><p><code>process_run.py</code> also plots a heatmap and a scatter plot of the 2D intercept positions (ignoring elevation).</p><table tabindex="0"><thead><tr><th>Heatmap</th><th>Scatter Plot</th></tr></thead><tbody><tr><td><img src="`+l+'" alt="Heatmap of 2D intercept positions"></td><td><img src="'+r+'" alt="Scatter plot of 2D intercept positions"></td></tr></tbody></table>',59)])])}const f=s(p,[["render",c]]);export{y as __pageData,f as default};
